\documentclass[11pt,english,italian,openright]{book}
\usepackage[ansinew]{inputenc}
\usepackage[a4paper]{geometry}
\geometry{verbose,tmargin=3cm,bmargin=3.5cm,lmargin=4cm,rmargin=3cm}
\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{3}
\usepackage{color}
\usepackage[italian]{babel}
\usepackage{float}
\usepackage{booktabs}
\usepackage{url}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{setspace}
\usepackage{esint}
\onehalfspacing
\usepackage[unicode=true,pdfusetitle,
 bookmarks=true,bookmarksnumbered=false,bookmarksopen=false,
 breaklinks=false,pdfborder={0 0 0},backref=false,colorlinks=false]
 {hyperref}

\makeatletter

%% Because html converters don't know tabularnewline
\providecommand{\tabularnewline}{\\}
\floatstyle{ruled}
\newfloat{algorithm}{tbp}{loa}[chapter]
\providecommand{\algorithmname}{Algoritmo}
\floatname{algorithm}{\protect\algorithmname}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% User specified LaTeX commands.
% pacchetti aggiuntivi
\usepackage{tabularx}
\usepackage{setspace}
\usepackage{amsthm}
\usepackage{rotating}
\usepackage{caption}
\usepackage{epsfig}
\usepackage{indentfirst}
\usepackage{fancyhdr}
\usepackage{url}
\usepackage{cite}
\usepackage[normalem]{ulem}
\usepackage[table]{xcolor}
\usepackage{booktabs}
\usepackage{algpseudocode}
\usepackage{algorithm}

% sistema il numero pagina nelle prime pagine dei capitoli
\fancypagestyle{plain}{
\fancyhead{}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}
\fancyfoot[OC]{\begin{flushright}\thepage\end{flushright}}
}

% header "carini" per la tesi
\fancyhead{}
\fancyhead[LE]{\slshape \nouppercase \leftmark}
\fancyhead[RO]{\slshape \nouppercase \rightmark}
\fancyfoot[EC]{\begin{flushleft}\thepage\end{flushleft}}
\fancyfoot[OC]{\begin{flushright}\thepage\end{flushright}}
\renewcommand{\headrulewidth}{0.4pt}
\setlength{\headheight}{14pt}

\@ifundefined{showcaptionsetup}{}{%
 \PassOptionsToPackage{caption=false}{subfig}}
\usepackage{subfig}
\makeatother

\usepackage{listings}
%\addto\captionsenglish{\renewcommand{\algorithmname}{Algorithm}}
%\addto\captionsenglish{\renewcommand{\lstlistingname}{Listing}}
%\addto\captionsitalian{\renewcommand{\algorithmname}{Algoritmo}}
%\addto\captionsitalian{\renewcommand{\lstlistingname}{Listato}}
%\renewcommand{\lstlistingname}{Listato}
\renewcommand{\lstlistingname}{Blocco}

%definizione colori per sintassi graphql
\definecolor{graphBlue}{rgb}{0.12,0.38,0.63}
\definecolor{graphViolet}{rgb}{0.55,0.17,0.73}
\definecolor{graphRed}{rgb}{0.84,0.26,0.57}

%personalizzazione listing per graphql
\lstset{
	breaklines=true,
	tabsize=2,
	literate={\ \ }{{\ }}1,
	moredelim=**[is][\color{graphViolet}]{@}{@},
	moredelim=**[is][\color{graphRed}]{~}{~},
	moredelim=**[is][\color{graphBlue}]{!}{!}
}

%START json definition
\newcommand\JSONnumbervaluestyle{\color{blue}}
\newcommand\JSONstringvaluestyle{\color{red}}

% switch used as state variable
\newif\ifcolonfoundonthisline

\makeatletter

\lstdefinestyle{json}
{
	showstringspaces    = false,
	keywords            = {false,true},
	alsoletter          = 0123456789.,
	morestring          = [s]{"}{"},
	stringstyle         = \ifcolonfoundonthisline\JSONstringvaluestyle\fi,
	MoreSelectCharTable =%
	\lst@DefSaveDef{`:}\colon@json{\processColon@json},
	basicstyle          = \ttfamily,
	keywordstyle        = \ttfamily\bfseries,
}

% flip the switch if a colon is found in Pmode
\newcommand\processColon@json{%
	\colon@json%
	\ifnum\lst@mode=\lst@Pmode%
	\global\colonfoundonthislinetrue%
	\fi
}

\lst@AddToHook{Output}{%
	\ifcolonfoundonthisline%
	\ifnum\lst@mode=\lst@Pmode%
	\def\lst@thestyle{\JSONnumbervaluestyle}%
	\fi
	\fi
	%override by keyword style if a keyword is detected!
	\lsthk@DetectKeywords% 
}

% reset the switch at the end of line
\lst@AddToHook{EOL}%
{\global\colonfoundonthislinefalse}

\makeatother
%END json definition

%colonna centrata per tabularx
\newcolumntype{C}{>{\centering\arraybackslash}X}
%header per tabularx
\newcommand*{\thead}[1]{\multicolumn{1}{c}{\bfseries #1}}

%comandi personalizzati
\newcommand{\virgolette}[1]{``#1''}
\newcommand{\upe}{\`E }

\begin{document}
\frontmatter
\pagestyle{empty}
\newgeometry{margin=3cm}\input{frontespizio/frontespizio.tex}\restoregeometry

\cleardoublepage{}

%\begin{flushright}
%\emph{\input{dedica.tex}}\cleardoublepage{}
%\par\end{flushright}


\chapter*{Ringraziamenti}

\thispagestyle{empty}\input{ringraziamenti.tex}\cleardoublepage{}


\chapter*{Sommario}

\thispagestyle{empty}\input{sommario.tex}\cleardoublepage{}


\chapter*{Abstract}

\thispagestyle{empty}\input{abstract.tex}\cleardoublepage{}\pagenumbering{roman}
\setcounter{page}{1}
\pagestyle{fancy}\tableofcontents{}\listoffigures
\listoftables
\listof{algorithm}{Elenco degli algoritmi}
\cleardoublepage{}\mainmatter
\renewcommand{\sectionmark}[1]{\markright{\thesection.\ #1}}
\renewcommand{\chaptermark}[1]{\markboth{\thechapter.\ #1}{}}


\chapter{Introduzione\label{ch:introduzione}}

\input{1-introduzione/introduzione.tex}


\chapter{Nozioni preliminari\label{ch:nozioni-preliminari}}

\input{2-nozioni-preliminari/nozioni-preliminari.tex}


\chapter{Il Progetto CAMUS\label{ch:camus}}

\input{3-camus/camus.tex}


\chapter{Metodologia di lavoro\label{ch:metodologia}}

\input{4-metodologia/metodologia.tex}


\chapter{Progettazione di dettaglio e implementazione del backend\label{ch:implementazione-backend}}

\input{5-implementazione-backend/implementazione-backend.tex}


\chapter{Progettazione di dettaglio e implementazione della mobile app\label{ch:implementazione-app}}

\input{6-implementazione-app/implementazione-app.tex}


\chapter{Valutazione delle performance\label{ch:performance}}

\input{7-performance/performance.tex}


\chapter{Conclusioni e sviluppi futuri\label{ch:conclusioni}}

\input{8-conclusioni/conclusioni.tex}

\bibliographystyle{ieeetr}
\bibliography{bibliografia}
\addcontentsline{toc}{chapter}{Bibliografia}

\cleardoublepage{}
\end{document}
